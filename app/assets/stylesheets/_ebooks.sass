// Copyright (C) 2012  TEA, the ebook alternative <http://www.tea-ebook.com/>
// 
// This file is part of TeaBook Open Reader
// 
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, version 3.0 of the License.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
// 
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
// 
// An additional permission has been granted as a special exception 
// to the GNU General Public Licence. 
// You should have received a copy of this exception. If not, see 
// <https://github.com/TEA-ebook/teabook-open-reader/blob/master/GPL-3-EXCEPTION>.



body[data-online=false]
  .ebooks
    article
      opacity: 0.5
      &.availableOffline
        opacity: 1

.ebooks
  position: relative
  width: 848px
  margin: 0 auto
  padding: 0 26px

  .sort
    position: fixed
    top: 45px
    left: 0
    right: 0
    padding: 20px 15px 0 15px
    color: $font_color_3
    font: normal 14px/16px "Museo 500"
    border-bottom: 1px solid #dbdbdc
    z-index: 1
    +background(linear-gradient(white, #edece8))
    +pie-clearfix
    form
      padding-top: 5px

  .listMode
    position: relative
    float: right
    display: block
    height: 30px
    text-indent: -9999px
    border: none
    text-decoration: none
    &::after
      position: absolute
      right: 0
      top: 3px
      content: "\f00b"
      font: normal 30px/30px 'Font icon'
      text-indent: 0
      color: $font_color_3

  form
    display: block

  #offlineStorage
    .quota
      position: relative
      width: 100%
      height: 20px
      background-color: #ccc
      .bar
        position: absolute
        width: 0
        height: 100%
        background-color: #999

  > article
    position: relative
    display: inline-block
    width: 212px
    margin: 20px 0 40px 0
    color: $font_color_3
    font: normal 13px/15px 'Arial'
    vertical-align: top
    &:hover, &:focus
      background-color: transparent
      -webkit-backface-visibility: hidden

    &.downloadable
      > .actions
        li
          position: relative
          &[class*="download"]
            position: absolute
            top: 2px
            left: 3px
            display: block
            width: 20px
            height: 20px
            margin: 0
            &::after
              position: absolute
              top: 0
              right: 0
              bottom: 0
              left: 0
              color: $font_color_4
            &:hover
              p
                left: 135%
          &:hover
            p
              position: absolute
              top: -7px
              left: 95%
              display: block
              padding: 10px
              white-space: nowrap
              color: white
              background-color: rgba(20, 20, 20, 0.8)
              z-index: 100
              +border-radius(4px)
              &::after
                position: absolute
                top: 13px
                right: 100%
                display: block
                content: ""
                border:
                  top: 5px solid transparent
                  right: 5px solid rgba(20, 20, 20, 0.8)
                  bottom: 5px solid transparent
          p
            display: none


    &.availableOffline
      > .actions
        li.download-impossible::after
          content: "\e03d"
          font: normal 20px/20px "Moon icon"
        li.download-possible
          display: none

    &.downloadable:not(.availableOffline)
      > .actions
        li.download-possible::after
          content: "\f019"
          font: normal 20px/20px "Font icon"
        li.download-impossible
          display: none

    &:not(.converted)
      > .cover
        a, img
          position: absolute
          bottom: 0
          left: 50%
          margin: 0 0 0 -50px

    &:nth-of-type(4n+1)
      &::before
        position: absolute
        bottom: -19px
        left: -26px
        content: ' '
        width: 900px
        height: 31px
        +background(image-url('shelf.png'))

    h2, h3, ul, p
      display: none
      &:empty
        display: none

    > .cover
      position: relative
      display: block
      height: 180px
      a
        position: absolute
        bottom: 0
        left: 50%
        margin: 0 0 0 -50px
        img
          max-width: 100px
          max-height: 180px
          margin: 0 auto
          +box-shadow(0 2px 5px rgba(0, 0, 0, 0.5))

    h2, h2 a
      text-decoration: none
      font: bold 16px/18px 'Arial'
      color: $font_color_3
    h2 a:hover
      text-decoration: underline

    h3
      font: bold 12px/14px 'Arial'
      color: $font_color_3

    > .actions
      padding-top: 25px
      right: 10px
      bottom: -19px

    .actions
      display: block
      position: absolute
      li
        display: none
        width: 35px
        margin: 0 0 15px 0
        &.details
          display: block
        a
          display: block
          position: relative
          height: 30px
          text-indent: -9999px
          border: none
          text-decoration: none
          &.hide
            display: none
          &::after
            position: absolute
            left: 0
            top: 3px
            width: 18px
            font: normal 30px/30px 'Font icon'
            text-indent: 0
            color: $font_color_4
            text-align: center
            border: none
            +text-shadow(0 1px 0 white)
          &.download::after
            content: "\f019"
          &.remove::after
            content: "\f057"
          &.read::after
            content: "\f06e"
          &.destroy::after
            content: "\f057"
          &.infos::after
            content: "\f05a"


    &.convert_error, &.extract_error, &.download_error
      opacity: 0.5

    .modal
      header
        h1
          font: normal 20px/20px 'Museo 700'
      section
        min-height: 300px
        padding-left: 220px
        *
          display: block
        .cover
          position: absolute
          left: 15px
        .actions
          position: relative
          left: auto
          li
            display: inline-block


  // Normal Mode
  &:not(.detailled)

  // Mode detailled
  &.detailled
    .listMode::after
      content: '\f009'

    > article
      width: 285px
      height: 162px
      padding: 0 15px 0 114px
      &::before
        display: none

      &:not(.converted)
        > .cover img
          top: 0

      h2, h3, ul, p
        display: block
      > .cover
        position: absolute
        left: 50px
        a
          top: 0
          bottom: auto

      > p
        font: normal 13px/15px "Helvetica"
        span
          font-weight: bold

      .readingStatus
        position: absolute
        bottom: 0
        li
          position: relative
          margin: 5px 0
          color: lighten($font_color_3, 35)
          font: normal 14px/16px "Arial"
          &::before
            float: left
            display: block
            content: ""
            width: 10px
            height: 10px
            margin: 5px 5px 0 0
            +border-radius(5px)
          &:first-child::before
            background-color: #2983a4
          &:last-child::before
            background-color: #b6c106
          span
            color: $font_color_3
            font: normal 17px/19px "Arial"


      .actions
        position: relative
        left: 0
        bottom: 0
        li
          display: inline-block




